<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <template id="report_cenova_ponuka_pdf_document_oddiel">
            <t t-call="report.internal_layout">
                <t t-set="o" t-value="oddiel" />
                <div class="page">
                    <h2>sub page Cenova ponuka</h2>
                    <h1>sub page IDecko</h1>
                </div>
            </t>
        </template>

        <template id="report_cenova_ponuka_pdf_document">
             <t t-call="report.internal_layout">
                <div class="page">
                    <t t-set="d" t-value="doc" />
                    <t t-if="d.name"><h2><span t-field="d.name"/></h2></t>
                    <!--<table>
                        <tr>
                            <td t-if="d.financny_kod">Finančný kód: <strong><span t-field="d.financny_kod"/></strong></td>
                            <td t-if="d.cislo">Číslo projektu PSID: <strong><span t-field="d.cislo"/></strong></td>
                            <td>&nbsp;</td>
                        </tr>
                        <tr>
                            <td t-if="d.skratka">Skratka: <strong><span t-field="d.skratka"/></strong></td>
                            <td t-if="d.datum_zaciatok">Dátum zahájenia: <strong><span t-field="d.datum_zaciatok"/></strong></td>
                            <td>Celková cena:</td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td t-if="d.datum_koniec">Dátum ukončenia: <strong><span t-field="d.datum_koniec"/></strong></td>
                            <td t-if="d.celkova_cena"><span t-field="d.celkova_cena"/></td>
                        </tr>
                        <tr>
                            <td t-if="d.pc_id.name">PC: <strong><span t-field="d.pc_id.name"/></strong></td>
                            <td t-if="d.pc_id.name">PC: <strong><span t-field="d.pc_id.name"/></strong></td>
                            <td t-if="d.pm_id.name">PM: <strong><span t-field="d.pc_id.name"/></strong></td>
                        </tr>
                    </table>-->

                    <div class="row mt32 mb32">
                        <div t-if="d.skratka" class="col-xs-3">
                            <strong>Short cut:</strong>
                            <p t-field="d.skratka"/>
                        </div>
                        <div t-if="d.financny_kod" class="col-xs-3">
                            <strong>Financial code:</strong>
                            <p t-field="d.financny_kod"/>
                        </div>
                        <div t-if="d.datum_zaciatok" class="col-xs-3">
                            <strong>Start date:</strong>
                            <p t-field="d.datum_zaciatok" t-field-options='{"format": "dd.MM.yyyy"}'/>
                        </div>
                        <div t-if="d.datum_koniec" class="col-xs-3">
                            <strong>End date:</strong>
                            <p t-field="d.datum_koniec" t-field-options='{"format": "dd.MM.yyyy"}'/>
                        </div>
                    </div>

                    <div class="row mt32 xs_32">
                        <div t-if="d.dodavatel_id.name" class="col-xs-3">
                            <strong>Vendor:</strong>
                            <p t-field="d.dodavatel_id.name"/>
                        </div>
                        <div t-if="d.pc_id.name" class="col-xs-3">
                            <strong>PC:</strong>
                            <p t-field="d.pc_id.name"/>
                        </div>
                        <div t-if="d.pm_id.display_name" class="col-xs-3">
                            <strong>PM:</strong>
                            <p t-field="d.pm_id.display_name"/>
                        </div>
                        <div t-if="d.celkova_cena">
                            <table width="100%">
                                <tr>
                                    <td style="font-size:20px;text-align:right;font-weight: bold;">Total price:</td>
                                </tr>
                                <tr>
                                    <td style="font-size:20px;text-align:right;font-weight: bold;"><span t-esc="d.celkova_cena" t-esc-options='{"widget": "monetary", "display_currency": "d.currency_id"}'/></td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <!--<div class="hlavicka">
                        <div class="row1">
                            <p t-if="d.name">Názov: <h3><span t-field="d.name"/></h3></p>
                        </div>
                        <div class="row2">
                            <td t-if="d.financny_kod">Finančný kód: <strong><span t-field="d.financny_kod"/></strong></td>
                            <td t-if="d.skratka">Skratka: <strong><span t-field="d.skratka"/></strong></td>
                            <td t-if="d.cislo">Číslo projektu PSID: <strong><span t-field="d.cislo"/></strong></td>
                        </div>
                        <div class="row3">
                            <td t-if="d.pc_id.name">PC: <strong><span t-field="d.pc_id.name"/></strong></td>
                            <td t-if="d.pm_id.name">PM: <strong><span t-field="d.pm_id.name"/></strong></td>
                        </div>
                        <div class="row4">
                            <td t-if="d.datum_zaciatok">Dátum zahájenia: <strong><span t-field="d.datum_zaciatok"/></strong></td>
                            <td t-if="d.datum_koniec">Dátum ukončenia: <strong><span t-field="d.datum_koniec"/></strong></td>
                        </div>
                        <div class="row5">
                            <p t-if="d.poznamka">Poznámka: <strong><span t-field="d.poznamka"/></strong></p>
                        </div>
                        <div class="row6">
                            <p t-if="d.celkova_cena">Celková cena: <h4><span t-field="d.celkova_cena"/></h4></p>
                        </div>
                    </div>-->
                    <t t-set="rows" t-value="d._get_oddiel(d.id)"/>
                    <t t-set="oddiels" t-value="d._get_oddiel(d.id)"/>
                    <section>
                        <h3>MONTAGE</h3>
                        <t t-foreach="oddiels[0]" t-as="oddiel">
                            <div>
                                <table width="100%" style="margin-top:20px;margin-bottom:20px">
                                    <tr>
                                        <td style="font-size:18px;width:50%;" t-esc="oddiel['oddiel']"/>
                                        <td style="font-size:18px;width:50%;text-align:right;" t-esc="d._get_price_oddiel(d.id, oddiel['id'])[0]" t-esc-options='{"widget": "monetary", "display_currency": "d.currency_id"}'/>
                                    </tr>
                                </table>
                                <table>
                                    <tr>
                                        <table width="100%">
                                            <t t-set="rowstyp" t-value="d._get_rows_oddiel_typ(d.id,oddiel['id'])"/>
                                            <t t-set="index" t-value="0"/>
                                            <tr t-foreach="rowstyp[0]" t-as="rowtyp">
                                                <td>
                                                    <t t-set="index" t-value="index+1" />
                                                        <t t-if="index==1">
                                                            <h5>Type item</h5>
                                                        </t>
                                                        <table style="width:100%">
                                                            <t t-if="index==1">
                                                                <thead style="border-bottom:1pt solid black;padding-bottom:40px;">
                                                                    <tr>
                                                                        <th style="width:10%;text-align:left">Section</th>
                                                                        <th style="width:10%;text-align:left">KSZ</th>
                                                                        <th style="width:45%;text-align:left">Item</th>
                                                                        <th style="width:5%;text-align:left">Measure unit</th>
                                                                        <th style="width:15%;text-align:right">Unite price</th>
                                                                        <th style="width:15%;text-align:right">Totaly price</th>
                                                                    </tr>
                                                                </thead>
                                                            </t>
                                                            <tbody>
                                                                <tr>
                                                                    <td style="width:10%;text-align:left"><span t-esc="rowtyp['oddiel']"/></td>
                                                                    <td style="width:10%;text-align:left"><span t-esc="rowtyp['ksz']"/></td>
                                                                    <td style="width:45%;text-align:left"><span t-esc="rowtyp['polozka']"/></td>
                                                                    <td style="width:5%;text-align:left"><span t-esc="rowtyp['mj']"/></td>
                                                                    <td style="width:15%;text-align:right"><span t-esc="rowtyp['cena_jednotkova']"/></td>
                                                                    <td style="width:15%;text-align:right"><span t-esc="rowtyp['cena_celkom']" t-esc-options='{"widget": "monetary", "display_currency": "d.currency_id"}'/></td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                </td>
                                            </tr>
                                        </table>
                                        <table width="100%" style="margin-top:10px" t-if="index>0">
                                            <tr>
                                                <td width="75%" style="font-size:16px;text-align:right;font-weight:bold;">Total items</td>
                                                <td width="25%" style="font-size:16px;text-align:right;font-weight:bold;"><span t-esc="d._get_price_oddiel_atyp(d.id, oddiel['id'], 0)[0]" t-esc-options='{"widget": "monetary", "display_currency": "d.currency_id"}'/></td>
                                            </tr>
                                        </table>
                                    </tr>
                                </table>
                                <table width="100%">
                                    <tr>
                                        <table width="100%">
                                            <t t-set="rowsatyp" t-value="d._get_rows_oddiel_atyp(d.id,oddiel['id'])"/>
                                            <t t-set="indexatyp" t-value="0" />
                                            <tr t-foreach="rowsatyp[0]" t-as="rowatyp">
                                                <td>
                                                    <t t-set="indexatyp" t-value="indexatyp+1" />
                                                    <t t-if="indexatyp==1">
                                                        <h5>Atypical items</h5>
                                                    </t>
                                                    <table style="width:100%">
                                                        <t t-if="indexatyp==1">
                                                            <thead style="border-bottom:1pt solid black;padding-bottom:40px;">
                                                                <tr>
                                                                    <th style="width:20%;text-align:left">Section</th>
                                                                    <th style="width:65%;text-align:left">Item</th>
                                                                    <th style="width:15%;text-align:right">Total price</th>
                                                                </tr>
                                                            </thead>
                                                        </t>
                                                        <tbody>
                                                            <tr>
                                                                <td style="width:20%;text-align:left"><span t-esc="rowatyp['oddiel']"/></td>
                                                                <td style="width:65%;text-align:left"><span t-esc="rowatyp['polozka']"/></td>
                                                                <td style="width:20%;text-align:right"><span t-esc="rowatyp['cena_celkom']" t-esc-options='{"widget": "monetary", "display_currency": "d.currency_id"}'/></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                        <table width="100%" style="margin-top:10px" t-if="indexatyp>0">
                                            <tr>
                                                <td style="font-size:16px;width:75%;text-align:right;font-weight:bold;">Total atypical items</td>
                                                <td style="font-size:16px;width:25%;text-align:right;font-weight:bold;"><span t-esc="d._get_price_oddiel_atyp(d.id, oddiel['id'], 1)[0]" t-esc-options='{"widget": "monetary", "display_currency": "d.currency_id"}'/></td>
                                            </tr>
                                        </table>
                                    </tr>
                                </table>
                            </div>
                        </t>
                    </section>
                    <section>
                        <h3>PACKAGES</h3>
                        <table width="100%">
                            <t t-set="rowsbalicek" t-value="d._get_rows_oddiel_balicek(d.id)"/>
                            <t t-set="index" t-value="0" />
                            <tr t-foreach="rowsbalicek[0]" t-as="rowbalicek">
                                <td>
                                    <t t-set="index" t-value="index+1" />
                                    <table style="width:100%">
                                        <tr t-if="index==1">
                                            <thead style="border-bottom:1pt solid black;">
                                                <tr>
                                                    <th style="width:10%">Code</th>
                                                    <th style="width:40%">Item</th>
                                                    <th style="width:10%;text-align:right">Quantity</th>
                                                    <th style="width:20%;text-align:right">Unit price</th>
                                                    <th style="width:20%;text-align:right">Total price</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <td><span t-esc="rowbalicek['kod']"/></td>
                                                <td><span t-esc="rowbalicek['polozka']"/></td>
                                                <td style="width:10%;text-align:right"><span t-esc="rowbalicek['pocet']"/></td>
                                                <td style="width:20%;text-align:right"><span t-esc="rowbalicek['cena_jednotkova']"/></td>
                                                <td style="width:20%;text-align:right"><span t-esc="rowbalicek['cena_celkom']" t-esc-options='{"widget": "monetary", "display_currency": "d.currency_id"}'/></td>
                                            </tbody>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </table>
                        <table width="100%" style="margin-top:10px" t-if="index>0">
                            <tr>
                                <td style="width:75%;font-size:16px;text-align:right;font-weight:bold;">Packages total</td>
                                <td style="width:25%;font-size:16px;text-align:right;font-weight:bold;"><span t-esc="d._get_price_balicky(d.id)[0]" t-esc-options='{"widget": "monetary", "display_currency": "d.currency_id"}'/></td>
                            </tr>
                        </table>
                    </section>
                </div>
            </t>
        </template>

        <template id="report_cenova_ponuka_pdf">
            <t t-call="report.html_container">
                <t t-foreach="docs" t-as="doc">

                    <!--<t t-call="o2net.layout_header" />-->
                    <!--<t t-call="o2net.report_cenova_ponuka_pdf_document" t-lang="doc.dodavatel_id.lang"/>-->
                    <!--<t t-call="o2net.layout_footer" />-->
                    <t t-call="o2net.report_cenova_ponuka_pdf_document"/>
                    <!--<t t-call="o2net.report_cenova_ponuka_pdf_document" t-lang="doc.dodavatel_id.lang"/>-->
                </t>
                 <div class="footer">
                     <div class="row">Printed: <span t-field="user.name"/> - <span t-esc="time.strftime('%Y-%m-%d %H:%M:%S')"/></div>
                 </div>
            </t>
        </template>

    </data>
</openerp>